{"version":3,"sources":["app.es6.js"],"names":["app","btnPesquisa","cepField","undefined","divResultado","divContentEndereco","btnNovaPesquisa","error","map","init","document","querySelector","getElementById","addEventListener","cep","value","replace","validaCep","innerHTML","setAttribute","buscaCEP","novaPesquisa","testaCep","test","url","axios","get","then","res","data","resultado","montaMapa","bairro","localidade","logradouro","uf","template","classList","remove","appendChild","mapboxgl","accessToken","Map","container","style","center","features","zoom","marker","Marker","setLngLat","addTo","add","removeAttribute","focus"],"mappings":"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","sourcesContent":["'use strict'\n\nconst app = {\n    btnPesquisa: null,\n    cepField: undefined,\n    divResultado: null,\n    divContentEndereco: null,\n    btnNovaPesquisa: null,\n    error: null,\n    map: undefined,\n\n    init() {\n        this.btnPesquisa = document.querySelector('.btn-pesquisar');\n        this.cepField = document.querySelector('.cep-field');\n        this.divResultado = document.querySelector('.endereco');\n        this.divContentEndereco = document.querySelector('.content-endereco');\n        this.btnNovaPesquisa = document.querySelector('.btn-nova-pesquisa');\n        this.error = document.querySelector('.error');\n        this.map = document.getElementById('map')\n\n        this.btnPesquisa.addEventListener('click', () => {\n            const cep = this.cepField.value.replace('-', '');\n\n            if(this.validaCep(cep)) {\n                this.error.innerHTML = \"\";\n                this.btnPesquisa.setAttribute('disabled', true)\n                this.buscaCEP(cep);\n            }\n        });\n\n        this.btnNovaPesquisa.addEventListener('click', () => {\n            this.novaPesquisa();\n        });\n    },\n\n    validaCep(cep) {\n        const testaCep = /^[0-9]{8}$/;\n\n        if(cep === \"\") {\n            this.error.innerHTML = \"O campo CEP não pode estar vazio.\";\n            return false;\n        }\n\n        if(!testaCep.test(cep)) {\n            this.error.innerHTML = \"Formato de CEP inválido.\";\n            return false;\n        }\n\n        return true;\n    },\n\n    buscaCEP(cep) {\n        const url = `https://viacep.com.br/ws/${cep}/json/`;\n\n        axios.get(url)\n            .then(res => {\n                const data = res.data;\n\n                this.resultado(data);\n                this.montaMapa(data)\n            })\n    },\n\n    resultado(data) {\n        const { bairro, cep, localidade, logradouro, uf } = data;\n\n        const template = `\n            <h1>${logradouro}</h1>\n            <p>${bairro}</p>\n            <p>${localidade} - ${uf}</p>\n            <p>${cep}</p>\n        `\n\n        this.divContentEndereco.innerHTML = template;\n        this.divResultado.classList.remove('hide');\n        this.divResultado.appendChild(this.divContentEndereco);\n    },\n\n    montaMapa(data) {\n        const { logradouro, cep, uf, localidade } = data;\n\n        const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${logradouro} ${localidade} ${uf} ${cep}.json?country=BR&access_token=pk.eyJ1IjoibWFyY2Vsb3NycCIsImEiOiJja2NxZWJ6ZGIwdXFrMndvYjRqY212MTMyIn0.RZuCbrv8fPfkjcZoBjwp0g`;\n\n        axios.get(url)\n            .then(res => {\n\n                mapboxgl.accessToken = 'pk.eyJ1IjoibWFyY2Vsb3NycCIsImEiOiJja2NxZWR4bmgwZnk1MnpxbTI0ZXBrYmxtIn0.LzZdvUxhA_RoQWzDbr7V2w';\n\n                const map = new mapboxgl.Map({\n                    container: this.map,\n                    style: 'mapbox://styles/mapbox/streets-v11',\n                    center: [res.data.features[0].center[0], res.data.features[0].center[1]],\n                    zoom: 14\n                });\n\n                const marker = new mapboxgl.Marker()\n                    .setLngLat([res.data.features[0].center[0], res.data.features[0].center[1]])\n                    .addTo(map);\n            })\n    },\n\n    novaPesquisa() {\n        this.divContentEndereco.innerHTML = \"\";\n        this.divResultado.classList.add('hide');\n        this.divResultado.appendChild(this.divContentEndereco);\n        this.btnPesquisa.removeAttribute('disabled', true)\n        this.cepField.value = \"\";\n        this.cepField.focus();\n    }\n}\n\napp.init();"],"file":"app.js"}